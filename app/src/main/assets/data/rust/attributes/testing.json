{"lang":"Rust","fullPath":"/attributes/testing","category":"attributes","title":"testing","url":"https://doc.rust-lang.org/stable/reference/attributes/testing.html","markdown":"# [Testing attributes](#testing-attributes)\n\nThe following [attributes](../attributes.html) are used for specifying functions for performing tests. Compiling a crate in \"test\" mode enables building the test functions along with a test harness for executing the tests. Enabling the test mode also enables the [test conditional compilation option](../conditional-compilation.html#test).\n\n## [The test attribute](#the-test-attribute)\n\nThe _`test` attribute_ marks a function to be executed as a test. These functions are only compiled when in test mode. Test functions must be free, monomorphic functions that take no arguments, and the return type must implement the [Termination](../../std/process/trait.Termination.html) trait, for example:\n\n* `()`\n* `Result<T, E> where T: Termination, E: Debug`\n* `!`\n\n> Note: The test mode is enabled by passing the `--test` argument to `rustc`or using `cargo test`.\n\nThe test harness calls the returned value's [report](../../std/process/trait.Termination.html#tymethod.report) method, and classifies the test as passed or failed depending on whether the resulting [ExitCode](../../std/process/struct.ExitCode.html) represents successful termination. In particular:\n\n* Tests that return `()` pass as long as they terminate and do not panic.\n* Tests that return a `Result<(), E>` pass as long as they return `Ok(())`.\n* Tests that return `ExitCode::SUCCESS` pass, and tests that return `ExitCode::FAILURE` fail.\n* Tests that do not terminate neither pass nor fail.\n\n```rust\n#![allow(unused)]\nfn main() {\nuse std::io;\nfn setup_the_thing() -> io::Result<i32> { Ok(1) }\nfn do_the_thing(s: &i32) -> io::Result<()> { Ok(()) }\n#[test]\nfn test_the_thing() -> io::Result<()> {\n    let state = setup_the_thing()?; // expected to succeed\n    do_the_thing(&state)?;          // expected to succeed\n    Ok(())\n}\n}\n```\n\n## [The ignore attribute](#the-ignore-attribute)\n\nA function annotated with the `test` attribute can also be annotated with the`ignore` attribute. The _`ignore` attribute_ tells the test harness to not execute that function as a test. It will still be compiled when in test mode.\n\nThe `ignore` attribute may optionally be written with the [_MetaNameValueStr_](../attributes.html#meta-item-attribute-syntax)syntax to specify a reason why the test is ignored.\n\n```rust\n#![allow(unused)]\nfn main() {\n#[test]\n#[ignore = \"not yet implemented\"]\nfn mytest() {\n    // â€¦\n}\n}\n```\n\n> **Note**: The `rustc` test harness supports the `--include-ignored` flag to force ignored tests to be run.\n\n## [The should\\_panic attribute](#the-should%5Fpanic-attribute)\n\nA function annotated with the `test` attribute that returns `()` can also be annotated with the `should_panic` attribute. The _`shouldpanic` attribute_makes the test only pass if it actually panics.\n\nThe `should_panic` attribute may optionally take an input string that must appear within the panic message. If the string is not found in the message, then the test will fail. The string may be passed using the[_MetaNameValueStr_](../attributes.html#meta-item-attribute-syntax) syntax or the [_MetaListNameValueStr_](../attributes.html#meta-item-attribute-syntax) syntax with an`expected` field.\n\n```rust\n#![allow(unused)]\nfn main() {\n#[test]\n#[should_panic(expected = \"values don't match\")]\nfn mytest() {\n    assert_eq!(1, 2, \"values don't match\");\n}\n}\n```\n\n[ ](../attributes.html \"Previous chapter\") [ ](../attributes/derive.html \"Next chapter\") "}