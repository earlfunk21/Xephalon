{"lang":"Go","title":"Packages","category":"","fullPath":"/Packages","markdown":"## Packages\n\nGo programs are constructed by linking together _packages_. A package in turn is constructed from one or more source files that together declare constants, types, variables and functions belonging to the package and which are accessible in all files of the same package. Those elements may be[exported](https://go.dev/ref/spec#Exported%5Fidentifiers) and used in another package.\n\n### Source file organization\n\nEach source file consists of a package clause defining the package to which it belongs, followed by a possibly empty set of import declarations that declare packages whose contents it wishes to use, followed by a possibly empty set of declarations of functions, types, variables, and constants.\n\nSourceFile       = [PackageClause](https://go.dev/ref/spec#PackageClause) \";\" { [ImportDecl](https://go.dev/ref/spec#ImportDecl) \";\" } { [TopLevelDecl](https://go.dev/ref/spec#TopLevelDecl) \";\" } .\n\n### Package clause\n\nA package clause begins each source file and defines the package to which the file belongs.\n\nPackageClause  = \"package\" [PackageName](https://go.dev/ref/spec#PackageName) .\nPackageName    = [identifier](https://go.dev/ref/spec#identifier) .\n\nThe PackageName must not be the [blank identifier](https://go.dev/ref/spec#Blank%5Fidentifier).\n\npackage math\n\nA set of files sharing the same PackageName form the implementation of a package. An implementation may require that all source files for a package inhabit the same directory.\n\n### Import declarations\n\nAn import declaration states that the source file containing the declaration depends on functionality of the _imported_ package ([§Program initialization and execution](https://go.dev/ref/spec#Program%5Finitialization%5Fand%5Fexecution)) and enables access to [exported](https://go.dev/ref/spec#Exported%5Fidentifiers) identifiers of that package. The import names an identifier (PackageName) to be used for access and an ImportPath that specifies the package to be imported.\n\nImportDecl       = \"import\" ( [ImportSpec](https://go.dev/ref/spec#ImportSpec) | \"(\" { [ImportSpec](https://go.dev/ref/spec#ImportSpec) \";\" } \")\" ) .\nImportSpec       = [ \".\" | [PackageName](https://go.dev/ref/spec#PackageName) ] [ImportPath](https://go.dev/ref/spec#ImportPath) .\nImportPath       = [string_lit](https://go.dev/ref/spec#string%5Flit) .\n\nThe PackageName is used in [qualified identifiers](https://go.dev/ref/spec#Qualified%5Fidentifiers)to access exported identifiers of the package within the importing source file. It is declared in the [file block](https://go.dev/ref/spec#Blocks). If the PackageName is omitted, it defaults to the identifier specified in the[package clause](https://go.dev/ref/spec#Package%5Fclause) of the imported package. If an explicit period (`.`) appears instead of a name, all the package's exported identifiers declared in that package's[package block](https://go.dev/ref/spec#Blocks) will be declared in the importing source file's file block and must be accessed without a qualifier.\n\nThe interpretation of the ImportPath is implementation-dependent but it is typically a substring of the full file name of the compiled package and may be relative to a repository of installed packages.\n\nImplementation restriction: A compiler may restrict ImportPaths to non-empty strings using only characters belonging to[Unicode's](https://www.unicode.org/versions/Unicode6.3.0/)L, M, N, P, and S general categories (the Graphic characters without spaces) and may also exclude the characters`` !\"#$%&'()*,:;<=>?[\\]^`{|} ``and the Unicode replacement character U+FFFD.\n\nConsider a compiled a package containing the package clause`package math`, which exports function `Sin`, and installed the compiled package in the file identified by`\"lib/math\"`. This table illustrates how `Sin` is accessed in files that import the package after the various types of import declaration.\n\nImport declaration          Local name of Sin\n\nimport   \"lib/math\"         math.Sin\nimport m \"lib/math\"         m.Sin\nimport . \"lib/math\"         Sin\n\nAn import declaration declares a dependency relation between the importing and imported package. It is illegal for a package to import itself, directly or indirectly, or to directly import a package without referring to any of its exported identifiers. To import a package solely for its side-effects (initialization), use the [blank](https://go.dev/ref/spec#Blank%5Fidentifier)identifier as explicit package name:\n\nimport _ \"lib/math\"\n\n### An example package\n\nHere is a complete Go package that implements a concurrent prime sieve.\n\npackage main\n\nimport \"fmt\"\n\n// Send the sequence 2, 3, 4, … to channel 'ch'.\nfunc generate(ch chan<- int) {\n\tfor i := 2; ; i++ {\n\t\tch <- i  // Send 'i' to channel 'ch'.\n\t}\n}\n\n// Copy the values from channel 'src' to channel 'dst',\n// removing those divisible by 'prime'.\nfunc filter(src <-chan int, dst chan<- int, prime int) {\n\tfor i := range src {  // Loop over values received from 'src'.\n\t\tif i%prime != 0 {\n\t\t\tdst <- i  // Send 'i' to channel 'dst'.\n\t\t}\n\t}\n}\n\n// The prime sieve: Daisy-chain filter processes together.\nfunc sieve() {\n\tch := make(chan int)  // Create a new channel.\n\tgo generate(ch)       // Start generate() as a subprocess.\n\tfor {\n\t\tprime := <-ch\n\t\tfmt.Print(prime, \"\\n\")\n\t\tch1 := make(chan int)\n\t\tgo filter(ch, ch1, prime)\n\t\tch = ch1\n\t}\n}\n\nfunc main() {\n\tsieve()\n}"}